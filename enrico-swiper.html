<link rel="import" href="../polymer/polymer.html">

<link rel="import" href="swiper-styles.html">
<script src="../swiper/dist/js/swiper.min.js"></script>
<!--
`enrico-swiper`
Swiper wrapper for polymer

@demo demo/index.html 
-->

<dom-module id="enrico-swiper">

  <template>
    <style include="swiper-styles">
      :host {
        display: block;
      }
      #myContent {
        display: none;
      }
    </style>

    <content id="myContent" hidden></content>
    <!-- Slider main container -->
    <div class="swiper-container">
      <!-- Additional required wrapper -->
      <div class="swiper-wrapper" id="wrapper">
      </div>
      <div class="swiper-pagination"></div>

      <div class="swiper-button-prev"></div>
      <div class="swiper-button-next"></div>

      <div class="swiper-scrollbar"></div>
    </div>

  </template>

  <script>
    Polymer({

      is: 'enrico-swiper',

      properties: {
        options: {
          type: Object,
        },
      },
      ready: function() {
        var boundHandler = this._childrenChanged.bind(this);
        this._observer = Polymer.dom(this.$.myContent).observeNodes(boundHandler);
      },
      _childrenChanged: function(info) {
        var nodes = info.addedNodes.filter(function(node) {
          return (node.nodeType === Node.ELEMENT_NODE && node.tagName != "TEMPLATE")
        });
        for (var i = 0; i < nodes.length; i++) {
          var swiperSlide = document.createElement('div');
          swiperSlide.setAttribute("class","swiper-slide");
          Polymer.dom(swiperSlide).appendChild(nodes[i]);
          Polymer.dom(this.$.wrapper).appendChild(swiperSlide);
        }
        if(this.options == undefined) {
          this.options = {};
        }
        var mySwiper = new Swiper('.swiper-container', this.options);
      },
    });
  </script>
</dom-module>
